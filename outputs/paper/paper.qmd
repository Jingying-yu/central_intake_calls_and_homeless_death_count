---
title: "No Correlations were Found between the efforts made by the Staff of Toronto's Central Intake Line and Toronto's Homeless Death Counts"
author: 
  - Sandy Yu
thanks: "Code and data are available at: https://github.com/Jingying-yu/central_intake_calls_and_homeless_death_count.git"
date: today
date-format: long
abstract: "For the City of Toronto, the physical well-being of its local homeless population has always been one of its primary focuses. Numerous social efforts, funded by the City, were made in attempts to reduce the death rate of the local homeless population. In order to visualize the magnitude of social impact enforced by the City of Toronto, analyses were performed to investigate the correlation between the efforts made by the staff of Toronto’s Central Intake Line and the monthly homeless death counts between November 2020 to June 2023 using data from OpenDataToronto. Staff efforts such as the number of calls coded, number of referral to shelter, and number of information for homelessness prevention, were documented and compared against the monthly homeless death counts. No discernible correlations were found between each of these efforts to the monthly homeless death counts."
format: pdf
toc: true
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(dplyr)
library(lubridate)
library(zoo)
library(knitr)
library(ggplot2)
```


# Introduction

The City of Toronto has been consistently providing funding and staff in an effort to reduce the active homeless population within its governing district. One of the key aspects of reducing homelessness is the assignment of sheltering space. Amongst numerous city efforts, the 24/7 helpline — Toronto Central Intake Line — was created to offer referrals to emergency shelters, sleeping accommodations, and provide general information about homelessness and prevention. [@Central_Intake_Call]. Starting in 2020, detailed data about the Central Intake Line became available on the OpenDataToronto portal [@OpenDataToronto].

In this paper, we want to measure the magnitude of positive impact created by the Central Intake Line in relation to the monthly cumulative number of deaths in the homeless community. Using Central Intake Call Wrap-up Codes data [@Central_Intake_Call] from OpenDataToronto [@OpenDataToronto], three different aspects of the Central Intake Line efforts were isolated: total calls coded, referral to shelter, and homelessness prevention information provided. These three key aspects were measured against the monthly cumulative Deaths of People Experiencing Homelessness Data [@Homeless_Death_Count] documented by the Toronto Public Health [@TPH]. The analyses yielded no discernible correlation between each of the three efforts and the monthly death counts. Further investigation could be conducted in the future if more detailed tracking data of the individual callers became available.

Analyses and findings in this paper are structured into several sections: @sec-data -- Data, @sec-result -- Result, @sec-discussion -- Discussion, and @sec-conclusion -- Conclusion. The Data section examines all datasets and variables kept for analysis, followed by an explanation of their data cleaning processes. The Result section focuses on visualizing and presenting the correlation between desired variables. The Discussion sections further evaluate the meaning behind the correlation presented in the previous section. Lastly, the arguments presented in all previous sections are wrapped up by the Conclusion section which summarizes the main findings in this paper.



\newpage
# Data {#sec-data}

All data used in this paper are obtained through OpenDataToronto Portal [@OpenDataToronto]. Two different datasets, Central Intake Call Wrap-Up Codes Data [@Central_Intake_Call] and Deaths of People Experiencing Homelessness[@Homeless_Death_Count], are retrieved to analyze the correlation between different factors of Toronto’s Central Call Line efforts and the monthly cumulative death counts of homeless individuals in Toronto. Data was cleaned and analyzed using the open source statistical programming language R [@citeR] and supporting packages tidyverse [@tidyverse], janitor [@janitor], dplyr [@dplyr], lubridate [@lubridate], zoo [@citeZoo], ggplot2 [@ggplot2], and knitr [@knitr]. Detailed process of data extracting and cleaning can be found in the subsections below.


## Central Intake Call Wrap-Up Codes

On the OpenDataToronto portal, there are several datasets that reflect the City’s effort to shelter the local homeless population. The Central Intake Call Wrap-Up Codes Dataset [@Central_Intake_Call], stored in the Central Intake Calls Catalogue [@Central_Intake_Call], is one of the freshest and most detailed. Data was stored and published by the Shelter, Support & Housing Administration since November of 2020 and refreshes on a monthly basis. The latest refresh occurred on January 15th, 2024.

The data set provides a daily summary of the number of calls received, the number of calls classified into distinct wrap-up codes by the nature of the issue, and a count of calls under each wrap-up code. One of the example wrap-up codes in the original data set was: Code 1A - Referral to a Sleeping/Resting Space. The original data set includes 13 distinct wrap-up codes; only two codes, Code 1A — Referral to a Sleeping/Resting Space and Code 2C — Information - Homelessness & Prevention Services, were chosen for our analysis.

The process of data cleaning for this dataset started from renaming and selecting. Variables of relevance: Date, Total calls coded, Code 1A, and Code 2C, were renamed into appropriate column names and selected (@tbl-daily-calls).

```{r}
#| label: tbl-daily-calls
#| tbl-cap: Sample of Renamed Central Intake Call Wrap-up Codes Variables
#| echo: false

central_intake_call_per_day <- read.csv(here::here("outputs/data/cleaned_central_intake_call_per_day.csv"))

sample_central_intake_call_per_day <- head(central_intake_call_per_day)

knitr::kable(sample_central_intake_call_per_day, col.names = c("Date", "Calls Coded", "Referral to Shelter", "Homelessness Prevention Info"), align = c("l", "c", "c", "c"))
```



Cleaned data is then filtered to include only data before July of 2023. Remaining Data is then summarized into monthly cumulative counts using the group_by() function and summarise() function under the tidyverse package [@tidyverse] (See @tbl-monthly-calls).The rationalization behind the filtering and summarizing actions will be explained in @sec-data-diff-datasets.

```{r}
#| label: tbl-monthly-calls
#| tbl-cap: Sample of Cleaned Central Intake Call Wrap-up Codes Dataset
#| echo: false

central_intake_call <- read.csv(here::here("outputs/data/cleaned_central_intake_call.csv"))

sample_central_intake_call <- head(central_intake_call)

knitr::kable(sample_central_intake_call, col.names = c("Month", "Calls Coded", "Referral to Shelter", "Homelessness Prevention Info"), align = c("l", "c", "c", "c"))
```


## Deaths of People Experiencing Homelessness




Talk way more about it. 

## Using Data from Different Datasets {#sec-data-diff-datasets}

# Results {#sec-result}

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| eval: false
#| warning: false
#| message: false

library(rstanarm)

first_model <-
  readRDS(file = here::here("outputs/models/first_model.rds"))
```

```{r}
#| echo: false
#| eval: false
#| label: tbl-modelresults
#| tbl-cap: "Explanatory models of flight time based on wing width and wing length"
#| warning: false

modelsummary::modelsummary(
  list(
    "First model" = first_model
  ),
  statistic = "mad",
  fmt = 2
)
```




# Discussion {#sec-discussion}

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage


```{r}
#| eval: false
#| echo: false
#| message: false
#| warning: false
#| label: fig-ppcheckandposteriorvsprior
#| layout-ncol: 2
#| fig-cap: "Examining how the model fits, and is affected by, the data"
#| fig-subcap: ["Posterior prediction check", "Comparing the posterior with the prior"]

pp_check(first_model) +
  theme_classic() +
  theme(legend.position = "bottom")

posterior_vs_prior(first_model) +
  theme_minimal() +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom") +
  coord_flip()
```

# Conclusion {#sec-conclusion}

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

```{r}
#| echo: false
#| eval: false
#| message: false
#| warning: false
#| label: fig-stanareyouokay
#| fig-cap: "Checking the convergence of the MCMC algorithm"
#| fig-subcap: ["Trace plot", "Rhat plot"]
#| layout-ncol: 2

plot(first_model, "trace")

plot(first_model, "rhat")
```



\newpage


# References


